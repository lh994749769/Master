buildscript {
    ext {
        ModuleDebug = {
            Properties properties = new Properties()
            def file = rootProject.file('local.properties')
            if (file.exists()) {
                InputStream inputStream = file.newDataInputStream()
                properties.load(inputStream)
                def str = properties.getProperty('MODULE_DEBUG')
                if(str == null){
                    return false
                }else{
                    return Boolean.parseBoolean(str)
                }
            }
            return false
        }.call()
        moduleList = {
            Properties properties = new Properties()
            def file = rootProject.file('local.properties')
            if (file.exists()) {
                InputStream inputStream = file.newDataInputStream()
                properties.load(inputStream)
                def str = properties.getProperty('MODULES')
                if (str == null) {
                    return []
                } else {
                    return str.split(",")
                }
            }
            return []
        }.call()
        maven = false
        versions = [
                'kotlin'     : '1.3.72',
                'compileSdk' : 29,
                'minSdk'     : 21,
                'targetSdk'  : 26,
                'butterknife': "10.1.0",
                'tinker'     : "1.9.9",
                'tinkerpatch': "1.2.9",
                'packerNG'   : "2.0.1",
                'arouter'    : "1.2.1",
                'glide'      : "4.9.0",
                'dagger'     : '2.22.1',
                'java'       : JavaVersion.VERSION_1_8,
                'rxlifecycle': "3.0.0",
                'master'     : "1.0.1-SNAPSHOT"
        ]

        deps = [
                'fastjson'                         : 'com.alibaba:fastjson:1.1.71.android',
                'HiHttp'                           : 'com.ooftf:hi-http:3.5.3',
                'MMKV'                             : 'com.tencent:mmkv:1.0.22',
                'progressDrawable'                 : 'com.github.ooftf:progress-drawable:1.2.0',
                'disklrucache'                     : 'com.jakewharton:disklrucache:2.0.2',
                'bugly'                            : 'com.tencent.bugly:crashreport_upgrade:latest.release',
                'dagger2_compiler'                 : "com.google.dagger:dagger-compiler:$versions.dagger",
                'matisse'                          : 'com.zhihu.android:matisse:0.5.2-beta4',
                'CalendarView'                     : 'com.github.ooftf:CalendarView:1.0.5',
                'ARouterCompiler'                  : "com.alibaba:arouter-compiler:$versions.arouter",
                'ARouterApi'                       : 'com.alibaba:arouter-api:1.4.1',
                'bindingcollectionadapter'         : 'me.tatarka.bindingcollectionadapter2:bindingcollectionadapter:3.1.1',
                'bindingcollectionadapter_recycler': 'me.tatarka.bindingcollectionadapter2:bindingcollectionadapter-recyclerview:3.1.1',
                'SmartRefreshLayout'               : 'com.scwang.smartrefresh:SmartRefreshLayout:1.1.0-andx-8',
                'SmartRefreshHeader'               : 'com.scwang.smartrefresh:SmartRefreshHeader:1.1.0-andx-8',
                'material'                         : 'com.google.android.material:material:1.1.0-alpha07',

        ]

        androidx = [
                'constraintLayout': 'androidx.constraintlayout:constraintlayout:2.0.0-beta4',
                'appcompat'       : 'androidx.appcompat:appcompat:1.2.0',
                'vectordrawable'  : 'androidx.vectordrawable:vectordrawable:1.1.0-beta02',
                'cardview'        : 'androidx.cardview:cardview:1.0.0',
                'recyclerview'    : 'androidx.recyclerview:recyclerview:1.0.0',
                'legacy_v4'       : 'androidx.legacy:legacy-support-v4:1.0.0',
                'legacy_v13'      : 'androidx.legacy:legacy-support-v13:1.0.0',

        ]
        test = [
                'junit'   : 'junit:junit:4.12',
                'runner'  : 'androidx.test:runner:1.2.0',
                'espresso': 'androidx.test.espresso:espresso-core:3.2.0',
        ]

    }
    repositories {
        jcenter()
        mavenCentral()
        maven { url 'https://oss.sonatype.org/content/repositories/snapshots' }
        google()
        mavenLocal()
        maven {
            url "https://dl.bintray.com/ooftf/maven"
        }
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:4.0.1'
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$versions.kotlin"
        // classpath "com.tinkerpatch.sdk:tinkerpatch-gradle-plugin:$versions.tinkerpatch"
        classpath "com.mcxiaoke.packer-ng:plugin:$versions.packerNG"
        classpath "com.alibaba:arouter-register:1.0.2"
        classpath 'com.billy.android:autoregister:1.4.2'
        classpath 'com.ooftf:plugin-task-time:1.0.0'
    }

}

allprojects {
    repositories {
        mavenCentral()
        jcenter()
        maven { url 'https://jitpack.io' }
        mavenLocal()
        maven() {
            url "https://oss.sonatype.org/content/repositories/snapshots"
        }
        maven { url "https://dl.bintray.com/thelasterstar/maven/" }
        maven {
            url "https://dl.bintray.com/ooftf/maven"
        }
        maven {
            url "https://dl.bintray.com/ooftf/image"
        }
        maven {
            url 'http://dl.bintray.com/amulyakhare/maven'
        }
        maven {
            url 'https://maven.google.com/'
        }
        google()
        maven {
            url 'https://maven.aliyun.com/repository/public'
        }

        maven {
            credentials {
                username 'XeiNW4'
                password 'RR3XPNBSd2'
            }
            url 'https://repo.rdc.aliyun.com/repository/78416-release-TOhjiY/'
        }
        maven {
            credentials {
                username 'XeiNW4'
                password 'RR3XPNBSd2'
            }
            url 'https://repo.rdc.aliyun.com/repository/78416-snapshot-YPE3KZ/'
        }
        maven {url 'http://developer.huawei.com/repo/'}
    }

}
task clean(type: Delete) {
    delete rootProject.buildDir
}

def LocalBintrayKey() {
    Properties properties = new Properties()
    def file = rootProject.file('local.properties')
    if (file.exists()) {
        InputStream inputStream = file.newDataInputStream()
        properties.load(inputStream)
        properties.getProperty('bintrayKey')
    }
}
